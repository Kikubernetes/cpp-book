# switch

一つの変数の値を調べながら分岐するような処理を書きたい場合は `switch` 文を使います。

```cpp
switch (x) {
    case 0:
        // x == 0 のときの処理
        break;
    case 1:
        // x == 1 のときの処理
        break;
    default:
        // x がそれ以外のときの処理
        break;
}
```

上記の構文は `if` で書き直すと次と等価になります。

```cpp
if (x == 0) {
    // x == 0 のときの処理
} else if (x == 1) {
    // x == 1 のときの処理
} else {
    // x がそれ以外のときの処理
}
```

ただし `switch` 文のほうが `if` よりも比較回数が少ないため効率的です。
`if` はまずはじめに `x == 0` が `true` かどうかを調べ `false` であれば
次に `x == 1` を評価しますが、`switch` 文はいきなり特定の `case` にジャンプします。

## フォールスルー

`switch` の各 `case` 内に書かれている `break` は書かなくてもよいのですが、
その場合振る舞いが変わります。

```cpp
switch (x) {
    case 0:
        // x == 0 のときの処理
    case 1:
        // x == 1 のときの処理
    default:
        // x がそれ以外のときの処理
}
```

`break` を書いた場合は `switch` 文の処理はそこで終わりますが、
`break` を書かなかった場合はそのまま下の `case` に処理が流れてしまいます。
つまり上記のコードは `x == 0` であれば `case 0` 内の処理を行った後に
`case 1` 内の処理を行い、最後に `default` の処理を行います。
`x == 1` であれば同様の振る舞いが `case 1` から始まります。
このような `switch` 文の仕様をフォールスルーと言います。
これは `case 0` と `case 1` の処理が同じものになる場合に使用すると便利です。

```cpp
switch (x) {
    case 0:
    case 1:
        // x == 0 または x == 1 のときの処理
    default:
        // x がそれ以外のときの処理
}
```

それ以外のケースでフォールスルーをさせるシーンはまずないため、
`break` を忘れずに付けておく必要があります。
